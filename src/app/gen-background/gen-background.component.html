<!--<input
    style="display: none"
    type="file" (change)="onFileChanged($event)"
    #fileInput>
<button (click)="fileInput.click()">Select File</button>

<img *ngIf="image" class="images" [src]="image.as_file" style="width:500px"/>
<p *ngIf="!image">No image selected.</p>
<button (click)="onUpload()">Upload!</button> -->
<mat-tab-group>
    <mat-tab label="Generate">
<mat-card>
    <mat-card-header>
        <mat-card-title>{{model.name}}</mat-card-title>



        <img mat-card-avatar class="images" src="{{'data:image/jpg;base64,' + model.thumbnail}}" style="width: 40px"/>

    </mat-card-header>
    <mat-card-content>
    <div>

        <form>
            <mat-form-field>
                <mat-label>Input New Prompt:</mat-label>
                <input matInput name="prompt" [(ngModel)]="prompt_text" (keydown.enter)="clickPrompt(prompt_text,num_samples,steps)">
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>Number to generate</mat-label>
                <mat-select [(ngModel)]="num_samples" name="number_of_samples">
                    <mat-option *ngFor="let s of sample_nums" [value]="s">
                        {{s}}
                    </mat-option>

                </mat-select>
            </mat-form-field>


        <!--<div *ngFor="let num of sample_nums;index as i" style="display: inline-block">
        <button mat-flat-button color="primary" *ngIf="count_button_highlight(i)" (click)="onSelectNumSamples(i)">{{sample_nums[i]}} Samples</button>
        <button mat-stroked-button color="primary" *ngIf="!count_button_highlight(i)" (click)="onSelectNumSamples(i)">{{sample_nums[i]}} Samples</button></div>-->



        </form>
        <div>
            <mat-slider min="25" max="150" step="5" discrete showTickMarks>
                <input matSliderThumb [(ngModel)]="steps">
            </mat-slider>
            <p>{{steps + ' steps'}}</p>
        </div>
    <div>
    <button mat-flat-button color="accent" (click)="clickPrompt(prompt_text,num_samples,steps)">Input Prompt</button>
    <button mat-flat-button color="warn" (click)="clear()">Clear</button>
        <div *ngIf="status_pending">
            <p>Awaiting Response</p>
            <mat-progress-bar color="accent" mode="indeterminate"></mat-progress-bar>
        </div>
    </div>
    </div>

        <mat-card *ngIf="new_results && new_results.length > 0" style="max-width: 775px">
            <mat-card-header>
                <mat-card-title>Generated Images:</mat-card-title>
            </mat-card-header>
            <div>
                <button *ngIf="any_selected()" mat-raised-button color="primary" (click)="saveImages()">Save Selected Images</button>
                <button *ngIf="!any_selected()" mat-raised-button color="primary" disabled>Save Selected Images</button>
            </div>
            <mat-card-content>
            <mat-card *ngFor="let new_result of new_results; index as i" style="max-width: 350px; display: inline-block">
                <mat-card-header>
                    <mat-checkbox (change)="change_generated_image_selection(i)" ></mat-checkbox>
                </mat-card-header>
                <div><img  class="images" src="{{'data:image/jpg;base64,' + new_result.image}}" style="width:200px;"/></div>

                <mat-card-actions><button mat-icon-button *ngFor="let ratingId of rating_nums;index as j" [id]="'star_'+j" (click)="onRate(j+1, i)" [matTooltip]="ratingId+''" matTooltipPosition="above">
                    <mat-icon>{{showIcon(j, i)}}</mat-icon>
                </button></mat-card-actions>
            </mat-card>
            </mat-card-content>


        </mat-card>
    </mat-card-content>

</mat-card>

    </mat-tab>
    <mat-tab label="History">
    <div *ngIf="generated_images && generated_images.length > 0" style="height: fit-content">
        <mat-card *ngFor="let image of generated_images" style="max-width: 350px; max-height: 500px; display: inline-block">
            <mat-card-header>
                <mat-card-title><p style="display: inline-block;">Rating: {{image.rating}}<mat-icon>star</mat-icon></p></mat-card-title>
                <mat-card-subtitle>Number of Steps: {{image.steps}}</mat-card-subtitle>
                <img mat-card-avatar class="images" src="{{'data:image/jpg;base64,' + model.thumbnail}}" style="width: 40px"/>
            </mat-card-header>
            <img mat-card-image class="images" src="{{'data:image/jpg;base64,' + image.image}}" style="width: 200px"/>
            <mat-card-content>
                <p>Prompt: {{image.prompt_text}}</p>

            </mat-card-content>
            <div>
                <mat-card-footer style="display: inline-block">
                    <button style="display: inline-block" mat-icon-button (click)="deleteImage(model.model_id, image.image_id)">
                    <mat-icon>delete</mat-icon></button>
                </mat-card-footer>
            </div>
        </mat-card>
    </div>
    </mat-tab>








</mat-tab-group>
